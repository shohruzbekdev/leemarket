print(clr := __import__("colorama"), help:="\n"+"="*30+"\n"+clr.Style.BRIGHT+"LeeMarket".center(30)+clr.Style.RESET_ALL+"\n"+"="*30+f"\n list {'View products list':>23}\n add {'Add new product':>24}\n edit {'Edit product':>23}\n help {'Show this message':>23}\n quit {'Quit':>23}\n"+"="*30+"\n", products:=[], info:=clr.Style.BRIGHT+"[INFO] "+clr.Style.RESET_ALL, error:=clr.Fore.RED+clr.Style.BRIGHT+"[ERROR] "+clr.Style.RESET_ALL, cancel:=clr.Fore.RED+"(type !cancel to cancel)"+clr.Style.RESET_ALL+": ", cancelled:=info+"Operation cancelled!", invalid:=error+"Invalid value entered!", add_product:=lambda: (lambda name: cancelled if name=="!cancel" else (lambda name, price: cancelled if price=="!cancel" else invalid if not price.isdigit() else (lambda name, price, in_stock: cancelled if in_stock=="!cancel" else invalid if not in_stock.isdigit() else f"{products.append({'name': name, 'price': int(price), 'in_stock': int(in_stock)})} "[-1].replace(' ', info+'Product successfully registered!'))(name, price, input("Enter number of units in stock"+cancel)))(name, input("Enter price"+cancel)))(input("Enter name"+cancel)), list_products:=lambda: (lambda t: (t.set_max_width(50), t.add_rows([["#", "Name", "Price", "In stock"]]+[[n+1, i["name"], i["price"], i["in_stock"]] for n, i in enumerate(products)]), t.draw())[-1])(__import__("texttable").Texttable()), edit_product:=lambda: (lambda id: cancelled if id=="!cancel" else invalid if not id.isdigit() else invalid if not 0<int(id)<=len(products) else (lambda key: cancelled if key=="!cancel" else invalid if key not in ["name","price","in_stock", "delete"] else (products.pop(int(id)-1), info+"Product successfully erased from existance!")[1] if key=="delete" else (lambda value: cancelled if value=="!cancel" else invalid if key in ["price","in_stock"] and not value.isdigit() else (products[int(id)-1].update({key:(int(value) if key in ["price", "in_stock"] else value)}), info+"Product updated!")[1])(input("Enter new value"+cancel)))(input("Which value do you want to edit(name/price/in_stock/delete)?"+cancel)))(input("Enter product number"+cancel)), (loop:=lambda command: __import__("sys").exit(clr.Fore.YELLOW + clr.Style.BRIGHT + "[Program Finished]" + clr.Style.RESET_ALL) if command == "quit" else loop(input(f"{add_product()}\n> ")) if command == "add" else loop(input(f"{list_products()}\n\n> ")) if command == "list" else loop(input(f"{edit_product()}\n\n> ")) if command=="edit" else loop(input(f"{help}\n> ")) if command == "help" else loop(input(error+'Wrong command entered\n> ')))("help"))